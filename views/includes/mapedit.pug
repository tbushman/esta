fieldset.lcontrol(style="padding:0;border:none;", v-cloak, v-if="mapReady")
	input(type="hidden", :value="JSON.stringify(doc.properties.layers)", name="layers[]")
	
	legend(style="font-size: 11px;") layers
	div.layer(v-for="(layer, o) in layers")
		a.drop(style="display: flex;", @click="subDropdown($event)")
			.ui(style="min-width:45px;min-width:var(--thumbw);margin:0;pointer-events:none;")

				img(:src="(!layer.properties.media[layer.properties.media.length - 1] || !layer.properties.media[layer.properties.media.length - 1].thumb || layer.properties.media[layer.properties.media.length - 1].thumb === '' ? (!layer.properties.media[0] ? '/images/publish_logo_sq.svg' : layer.properties.media[0].thumb) : layer.properties.media[layer.properties.media.length - 1].thumb)+'?version='+Math.random()", style="pointer-events: none;")
			
			span.tb-font-m(v-text="layer.properties.label", style="width:auto; padding-right: 15px; padding-left: 8px;")
			input(type="checkbox", :value="layer._id", :id="'layer_'+o", v-text="layer.properties.label", style="position:absolute;", @click="changeLayers(layer._id, $event)", :checked="(doc.properties.layers.map(function(item){return item.lid}).indexOf(layer._id) !== -1)")
		div.slidedown(v-for="(style, k) in doc.properties.layers", v-if="style.lid === layer._id")
			legend(style="font-size: 11px;") style
			label(style="font-size: 9px;margin-top:10px;", for="key") Key
			select#key(@change="changeAttribute(layer._id, $event)", v-model="style.key" style="margin:0;")
				//v-if="(json[style.lid] && json[style.lid].features && !isNaN(parseInt(json[style.lid].features[0].properties[item],10)))"
				option(v-for="(item,l) in layer.properties.keys", v-text="item", :value="item", :selected="item === style.key")
			label(style="font-size: 9px;", for="buckets") # Buckets
			input(type="number", min="1", max="4", v-model="style.buckets", style="margin:0;", @change="numberColorBucket(style.lid, $event)")
			legend(style="font-size: 11px;") Color
			div.row(v-if="style.inc", v-for="(c,j) in style.colors")
				label(style="font-size: 7px;position:absolute;padding:6px;color:#fff;font-weight:heavier;", :for="'color'+j", v-text="(style.min + (style.inc * j)).toFixed(1) + 'â€“' + (!style.colors[j+1] ? style.max : (style.min + (style.inc * (j+1)))).toFixed(1)")
				input(:id="'color'+j", type="color", v-model="style.colors[j]", @change="changeColorBucket(style.lid, j, $event)", style="pointer-events:all;")
		

	legend.block(style="font-size: 11px; margin-top:10px;", v-if="availablelayers && availablelayers !== '' && availablelayers.length > 0") more
	a.drop(style="display: flex;", @click="subDropdown($event)", v-if="availablelayers && availablelayers !== '' && availablelayers.length > 0")
		.ui(style="min-width:45px;min-width:var(--thumbw);margin:0;pointer-events:none;")
			img(src="/images/icons/add.svg", style="pointer-events: none;")
	
		span.tb-font-m(v-html="'Available layers'", style="width:auto; padding-right: 15px; padding-left: 8px;")

	div.slidedown
		a.drop(v-for="(alayer, p) in availablelayers", v-if="(doc.properties.layers.map(function(item){return item.lid}).indexOf(alayer._id) === -1)" style="display: flex;")
			.ui(style="min-width:45px;min-width:var(--thumbw);margin:0;")
				img(:src="(!alayer.properties.media[alayer.properties.media.length - 1] || !alayer.properties.media[alayer.properties.media.length - 1].thumb || alayer.properties.media[alayer.properties.media.length - 1].thumb === '' ? (!alayer.properties.media[0] ? '/images/publish_logo_sq.svg' : alayer.properties.media[0].thumb) : alayer.properties.media[alayer.properties.media.length - 1].thumb)+'?version='+Math.random()", style="pointer-events: none;")
			
			span.tb-font-m(v-text="alayer.properties.label", style="width:auto; padding-right: 15px; padding-left: 8px;")
			input(type="checkbox", :value="alayer._id", :id="'alayer_'+p", v-text="alayer.properties.label", style="position:absolute;", @click="changeLayers(alayer._id, $event)", :checked="(doc.properties.layers.map(function(item){return item.lid}).indexOf(alayer._id) !== -1)")
	//- legend(style="font-size: 11px;") census
	//- label(for="placetype", style="width: 45px;") Population Data
	//- select#placetype(style="pointer-events: all;", name="placetype",@change="changeCensusJurisdiction($event)")
	//- 	option(value="null", v-text="'None'", v-bind:selected="!censusLoad.placetype")
	//- 	option(v-for="(pl, p) in placetypes", v-text="pl.name", :value="p")
	//- label(for="placetype", v-if="censusLoad.cats && censusLoad.cats.length") Data category
	//- select#place( v-if="censusLoad.cats && censusLoad.cats.length", style="pointer-events: all;", @change="changeCensusData($event)", v-model="censusLoad.cat")
	//- 	option(value="null", v-text="'None'", v-bind:selected="!censusLoad.cat")
	//- 	option(v-if="censusLoad.cats.length", v-for="(cat, i) in censusLoad.cats", v-text="cat", :value="cat", :selected="censusLoad.cat === cat")

	//- select(@change="changeCensus($event)")
	//- 	option(value="null", v-text="'None'", v-bind:selected="!boundary")
	//- 	option(v-for="(bound, r) in boundaries", v-text="bound.name", :value="bound.code")
	//- a.drop(v-for="(bound, r) in boundaries", style="display:flex;")
	//- 	.ui(style="pointer-events: none;min-width:45px;min-width:var(--thumbw);margin:0;")
	//- 		img(src="/images/publish_logo_sq.svg", style="pointer-events:none;")
	//- 	span.tb-font-m(v-text="bound.name")
	//- 	input(type="checkbox", :value="bound.code", v-text="bound.name", style="position:absolute;", @click="changeCensus(bound.code, $event)")

	//- legend(style="font-size: 11px;") eviction
	//- a.drop(style="display:flex;", @click="getEvictionLab")
	//- 	.ui(style="pointer-events: none;min-width:45px;min-width:var(--thumbw);margin:0;")
	//- 		img(src="/images/publish_logo_sq.svg")
	//- 	span.tb-font-m(v-text="'evictionlab'", style="width:auto; padding-right: 15px; padding-left: 8px;")

	
	legend(style="font-size: 11px;") base
	a.drop(style="display: flex;")
		.ui(style="pointer-events: none;min-width:45px;min-width:var(--thumbw);margin:0;")
			//- label(for="base_0", v-text="'streets'", style="font-size: 7px;line-height:7px;height:7px;pointer-events:none;position:absolute;background-color:var(--primary);") 
			img(src="/images/base_0.jpg", style="pointer-events: none;")
		span.tb-font-m(v-text="'streets'", style="width:auto; padding-right: 15px; padding-left: 8px;")
		input(type="radio", value="0", id="base_0", v-text="'Streets'", style="position:absolute;", @click="changeBase(0, $event)", :checked="base === 0")
	a.drop(style="display: flex;")
		.ui(style="pointer-events: none;min-width:45px;min-width:var(--thumbw);margin:0;")
			//- label(for="base_1", v-text="'satellite'", style="font-size: 7px;line-height:7px;height:7px;pointer-events:none;position:absolute;background-color:var(--primary);") 
			img(src="/images/base_1.jpg", style="pointer-events: none;margin:0;")
		span.tb-font-m(v-text="'Satellite'", style="width:auto; padding-right: 15px; padding-left: 8px;")
		input(type="radio", value="1", id="base_1", v-text="'Satellite'", style="position:absolute;", @click="changeBase(1, $event)", :checked="base === 1")
